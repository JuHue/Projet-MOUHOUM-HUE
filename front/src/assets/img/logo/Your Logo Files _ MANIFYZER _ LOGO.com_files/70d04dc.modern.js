(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{1196:function(e,t,r){"use strict";r(33);var o=r(12);t.a=function(){var{feature:e,runOnMount:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:()=>({runOnMount:t}),computed:{featureName(){return this.feature||e},canAccessFeature(){return this.checkCanAccessFeature(this.featureName)},planFeatures(){var e,t;return(null===(e=this.user)||void 0===e||null===(t=e.plan)||void 0===t?void 0:t.features)||[]}},methods:{promptForUpgrade(){this.canAccessFeature||o.a.$emit(o.b.UserOpenDashboardUpgradeModal,{onClose:this.handleCancelUpgrade})},handleCancelUpgrade(){console.log("cancelled")},checkCanAccessFeature(e){return!e||!this.planFeatures.length||this.planFeatures.includes(e)}},mounted(){this.user||console.error("No user availale for feature locking"),this.runOnMount&&this.promptForUpgrade()}}}},1219:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />\n</svg>'},1220:function(e,t,r){"use strict";r(14);var o=r(9),n=r(98),l=r.n(n),c=r(287),d={components:{ArrowRight:l.a,Avatar:c.a},props:{prompt:{type:String,default:"View"},logo:{type:Object,required:!0}},computed:{color(){var e,t,r;return null===(e=this.logo)||void 0===e||null===(t=e.assets)||void 0===t||null===(r=t.palette)||void 0===r?void 0:r.background},wordmark(){var e;return(null===(e=this.logo)||void 0===e?void 0:e.wordmark)||""}}},h=r(7),v=Object(h.a)(d,(function(){var e=this,t=e._self._c;return e.logo?t("div",{staticClass:"flex-shrink-0 group flex items-center justify-start text-left"},[t("Avatar",{staticClass:"h-12 w-12 p-2 flex-shrink-0",attrs:{src:e.logo.previews&&e.logo.previews.tight_bounds,icon:e.logo.icon,color:e.color}}),e._v(" "),t("div",{staticClass:"ml-3 overflow-hidden flex-1"},[t("p",{staticClass:"no-translate text-sm leading-tight font-medium text-gray-700 group-hover:text-gray-900"},[e._v("\n      "+e._s(e.wordmark)+"\n    ")]),e._v(" "),e.prompt?t("p",{staticClass:"flex mt-0.5 items-center text-xs font-medium text-gray-500 group-hover:text-gray-700"},[e._v("\n      "+e._s(e.prompt)+"\n      "),t("ArrowRight",{staticClass:"w-2.5 h-2.5 ml-0.5 mt-px"})],1):e._e()])],1):e._e()}),[],!1,null,null,null).exports,f=r(1219),m=r.n(f);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var w={components:{PackagePreview:v},props:{logo:{type:Object,required:!0},logos:{type:Array,default:()=>[]},user:{type:Object,required:!0}},data:()=>({active:!1,createNewLogoPrompt:{icon:m.a,logo:{wordmark:"New Logo",previews:{}},prompt:"Create new logo"}}),computed:{logosToShowInList(){var e=this.logos.reduce(((e,t)=>(t.id!==this.logo.id&&e.push(t),e)),[]);return this.userCanCreateMoreLogos&&e.push(function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.createNewLogoPrompt)),e},userCanCreateMoreLogos(){return this.logos.length<this.user.plan.max_saved_logos},canExpand(){return this.logosToShowInList.length>0||this.userCanCreateMoreLogos}},methods:{onOptionClick(option){var e=option.id?"/dashboard/".concat(option.id):"/business-name";this.$router.push(e)}}},O=w,x=Object(h.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[e.logo?t("div",{staticClass:"relative w-full text-left focus:outline-none",attrs:{tabindex:"0"},on:{blur:function(t){e.active=!1}}},[t("span",{staticClass:"w-full rounded-md text-gray-700",class:{"cursor-pointer hover:text-gray-500":e.canExpand},attrs:{id:"package-switcher","aria-haspopup":"true","aria-expanded":e.active},on:{click:function(t){e.canExpand&&(e.active=!e.active)}}},[t("PackagePreview",{attrs:{logo:e.logo,prompt:e.canExpand?"Switch Logo":null}})],1),e._v(" "),t("transition",{attrs:{name:"dropdown"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"absolute inset-x-0 -mx-4 mt-2 max-h-60 overflow-y-auto rounded-md bg-white shadow-2xl origin-top z-10"},[t("div",{staticClass:"py-1",attrs:{role:"menu","aria-orientation":"vertical","aria-labelledby":"package-switcher"}},e._l(e.logosToShowInList,(function(option){return t("span",{key:option.id,staticClass:"w-full cursor-pointer border-b border-gray-100 whitespace-no-wrap text-left block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900",attrs:{role:"menuitem"},on:{click:function(t){return e.onOptionClick(option)}}},[t("PackagePreview",{attrs:{logo:option,prompt:option.prompt||"View logo"}})],1)})),0)])])],1):e._e()])}),[],!1,null,null,null);t.a=x.exports},1223:function(e,t,r){"use strict";r(14);var o=r(1),n=r(9),l=(r(23),r(24),r(47),r(29),r(34),r(12)),c=r(21),d=r(271),h=r(417),v=r(16),f=r.n(v);r(31);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={mixins:[d.a],props:{params:{type:Array,default:()=>[]},logo:{type:Object,required:!0},path:{type:String,default:""}},data:()=>({tokenRefreshInterval:null,initialToken:null}),computed:y(y({query(){var e,t,r={token:this.initialToken,roles:this.userRoles,logo:this.logo.id,background:this.bg,enterpriseName:this.companyName,enterpriseIcon:this.darkLogo,enterpriseLogo:this.darkLogo,enterprisePrimary:null===(e=this.palette)||void 0===e?void 0:e.primary,enterpriseSecondary:null===(t=this.palette)||void 0===t?void 0:t.secondary};return this.params.forEach((e=>{var[t,o]=e;r[t]=o})),new URLSearchParams(r)},stitch(){return(this.$store.state.flags.enable_stitch_edge?"https://stitch-edge.logo.com":"https://stitch.logo.com")+this.path+"?".concat(this.query)},bg(){return this.logo.assets.palette.background.replace("#","")},palette(){return this.enterprise.theme.palette}},Object(c.e)(["enterprise"])),Object(c.c)(["companyName","darkLogo"])),mounted(){var e=this;return Object(o.a)((function*(){var t=yield h.a.currentSession(),r=t.getRefreshToken().token,n=t.getAccessToken().getJwtToken();f.a.set("refreshToken",r,{domain:"logo.com"}),f.a.set("accessToken",n,{domain:"logo.com"}),e.initialToken=n,e.track(),window.addEventListener("message",e.handleStitchMessage),e.tokenRefreshInterval=setInterval(Object(o.a)((function*(){yield e.getToken(),e.sendMessage("TOKEN_".concat(e.token))})),5e4)}))()},beforeDestroy(){window.removeEventListener("message",this.handleStitchMessage),clearInterval(this.tokenRefreshInterval)},methods:{handleStitchMessage(e){var{data:data=""}=e;if("STITCH_EXIT"!==data&&"STITCH_FINISHED"!==data||this.$emit("exit"),"string"==typeof data&&data.startsWith("STITCH_PROGRESS:")){var t=data.split(":")[1];"socials"===t?this.$store.dispatch("dashboard/markStepAsComplete","social-media"):"business-cards"===t&&this.$store.dispatch("dashboard/markStepAsComplete","business-cards")}},sendMessage(e){if(this.$refs.stitch)try{this.$refs.stitch.contentWindow.postMessage(e,"*")}catch(e){}},track(){var e,t,r=this.$route.path,o=this.logo.id,n=(null===(e=r.replace("/dashboard/".concat(o,"/"),""))||void 0===e||null===(t=e.split("/"))||void 0===t?void 0:t[0])||r;l.a.$emit(l.b.AnalyticsGA4Event,{event:"stitch_visit",feature:n,logo:o})}}},O=r(7),component=Object(O.a)(w,(function(){var e=this,t=e._self._c;return!e.loadingUser&&this.initialToken?t("iframe",{ref:"stitch",staticClass:"translate-iframe",attrs:{src:e.stitch,frameborder:"0"}}):e._e()}),[],!1,null,null,null);t.a=component.exports},1253:function(e,t,r){"use strict";var o=r(1220),n=r(286),l=r(1223),c={components:{DashboardNavigation:n.a,SavedLogoSwitcher:o.a,Stitch:l.a},props:{params:{type:Array,default:()=>[]},logo:{type:Object,required:!0},path:{type:String,default:""},user:{type:Object,required:!0},logos:{type:Array,default:()=>[]}}},d=r(7),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex h-screen flex-col"},[t("header",{staticClass:"flex bg-white border-b border-gray-200"},[t("div",{staticClass:"flex items-center w-64 px-4 py-1.5 border-r"},[t("SavedLogoSwitcher",{attrs:{logo:e.logo,logos:e.logos,user:e.user}})],1),e._v(" "),t("div",{staticClass:"flex-1 flex items-center relative flex-shrink-0 py-1.5 px-4"},[t("DashboardNavigation",{staticClass:"w-full",attrs:{logo:e.logo}})],1)]),e._v(" "),t("Stitch",e._b({staticClass:"w-screen flex-1",on:{exit:function(t){return e.$router.push("/dashboard/".concat(e.logo.id))}}},"Stitch",{params:e.params,path:e.path,logo:e.logo},!1))],1)}),[],!1,null,null,null);t.a=component.exports},2085:function(e,t,r){"use strict";r.r(t);r(29);var o=r(1253),n=r(1196),l={layout:"simple",transition:"fade",components:{StitchLayout:o.a},mixins:[Object(n.a)({feature:"social-media-creator"})],props:{loading:{type:Boolean,default:!0},logo:{type:Object,required:!0},user:{type:Object,required:!0},logos:{type:Array,default:()=>[]}},methods:{handleCancelUpgrade(){this.$router.replace("/dashboard/".concat(this.logo.id,"/social-media"))}}},c=r(7),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",[e.canAccessFeature?t("StitchLayout",e._b({},"StitchLayout",{logo:e.logo,logos:e.logos,user:e.user,path:"/dashboard/templates/socials"},!1)):e._e()],1)}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=70d04dc.modern.js.map